<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/sergey/repos/realsense_explorer_bot/src/realsense_explorer_description/urdf/realsense_explorer.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="realsense_explorer">
  <link name="base_link"/>
  <material name="camera_aluminum">
    <color rgba="0.5 0.5 0.5 1"/>
  </material>
  <!-- camera body, with origin at bottom screw mount -->
  <joint name="camera_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.038 0 0.09"/>
    <parent link="robot_base"/>
    <child link="camera_bottom_screw_frame"/>
  </joint>
  <link name="camera_bottom_screw_frame"/>
  <joint name="camera_link_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.0175 0.0125"/>
    <parent link="camera_bottom_screw_frame"/>
    <child link="camera_link"/>
  </joint>
  <link name="camera_link">
    <visual>
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0.0149 -0.0175 0"/>
      <geometry>
        <!-- <box size="${d435_cam_width} ${d435_cam_height} ${d435_cam_depth}"/> -->
        <mesh filename="package://realsense2_description/meshes/d435.dae"/>
        <!--<mesh filename="package://realsense2_description/meshes/d435/d435.dae" />-->
      </geometry>
      <material name="camera_aluminum"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 -0.0175 0"/>
      <geometry>
        <box size="0.02505 0.09 0.025"/>
      </geometry>
    </collision>
    <inertial>
      <!-- The following are not reliable values, and should not be used for modeling -->
      <mass value="0.564"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.003881243" ixy="0.0" ixz="0.0" iyy="0.000498940" iyz="0.0" izz="0.003879257"/>
    </inertial>
  </link>
  <!-- camera depth joints and links -->
  <joint name="camera_depth_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="camera_link"/>
    <child link="camera_depth_frame"/>
  </joint>
  <link name="camera_depth_frame"/>
  <joint name="camera_depth_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="camera_depth_frame"/>
    <child link="camera_depth_optical_frame"/>
  </joint>
  <link name="camera_depth_optical_frame"/>
  <!-- camera left IR joints and links -->
  <joint name="camera_left_ir_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.0 0"/>
    <parent link="camera_depth_frame"/>
    <child link="camera_left_ir_frame"/>
  </joint>
  <link name="camera_left_ir_frame"/>
  <joint name="camera_left_ir_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="camera_left_ir_frame"/>
    <child link="camera_left_ir_optical_frame"/>
  </joint>
  <link name="camera_left_ir_optical_frame"/>
  <!-- camera right IR joints and links -->
  <joint name="camera_right_ir_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 -0.05 0"/>
    <parent link="camera_depth_frame"/>
    <child link="camera_right_ir_frame"/>
  </joint>
  <link name="camera_right_ir_frame"/>
  <joint name="camera_right_ir_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="camera_right_ir_frame"/>
    <child link="camera_right_ir_optical_frame"/>
  </joint>
  <link name="camera_right_ir_optical_frame"/>
  <!-- camera color joints and links -->
  <joint name="camera_color_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0.015 0"/>
    <parent link="camera_depth_frame"/>
    <child link="camera_color_frame"/>
  </joint>
  <link name="camera_color_frame"/>
  <joint name="camera_color_optical_joint" type="fixed">
    <origin rpy="-1.5707963267948966 0 -1.5707963267948966" xyz="0 0 0"/>
    <parent link="camera_color_frame"/>
    <child link="camera_color_optical_frame"/>
  </joint>
  <link name="camera_color_optical_frame"/>
  <gazebo reference="camera_link">
    <self_collide>0</self_collide>
    <enable_wind>0</enable_wind>
    <kinematic>0</kinematic>
    <gravity>1</gravity>
    <!--<mu>1</mu>-->
    <mu2>1</mu2>
    <fdir1>0 0 0</fdir1>
    <!--<slip1>0</slip1>
      <slip2>0</slip2>-->
    <kp>1e+13</kp>
    <kd>1</kd>
    <!--<max_vel>0.01</max_vel>
      <min_depth>0</min_depth>-->
    <sensor name="cameracolor" type="camera">
      <camera name="camera">
        <horizontal_fov>1.2112585008840648</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
          <format>RGB_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>20.0</update_rate>
      <visualize>1</visualize>
    </sensor>
    <sensor name="cameraired1" type="camera">
      <camera name="camera">
        <horizontal_fov>1.4870205226991688</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>L_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.05</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>20.0</update_rate>
      <visualize>0</visualize>
    </sensor>
    <sensor name="cameraired2" type="camera">
      <camera name="camera">
        <horizontal_fov>1.4870205226991688</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
          <format>L_INT8</format>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.05</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>20.0</update_rate>
      <visualize>0</visualize>
    </sensor>
    <sensor name="cameradepth" type="depth">
      <camera name="camera">
        <horizontal_fov>1.4870205226991688</horizontal_fov>
        <image>
          <width>1280</width>
          <height>720</height>
        </image>
        <clip>
          <near>0.1</near>
          <far>100</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.100</stddev>
        </noise>
      </camera>
      <always_on>1</always_on>
      <update_rate>20.0</update_rate>
      <visualize>0</visualize>
    </sensor>
  </gazebo>
  <gazebo>
    <plugin filename="librealsense_gazebo_plugin.so" name="camera">
      <prefix>camera</prefix>
      <depthUpdateRate>20.0</depthUpdateRate>
      <colorUpdateRate>20.0</colorUpdateRate>
      <infraredUpdateRate>20.0</infraredUpdateRate>
      <depthTopicName>depth/image_raw</depthTopicName>
      <depthCameraInfoTopicName>depth/camera_info</depthCameraInfoTopicName>
      <colorTopicName>color/image_raw</colorTopicName>
      <colorCameraInfoTopicName>color/camera_info</colorCameraInfoTopicName>
      <infrared1TopicName>infra1/image_raw</infrared1TopicName>
      <infrared1CameraInfoTopicName>infra1/camera_info</infrared1CameraInfoTopicName>
      <infrared2TopicName>infra2/image_raw</infrared2TopicName>
      <infrared2CameraInfoTopicName>infra2/camera_info</infrared2CameraInfoTopicName>
      <colorOpticalframeName>camera_color_optical_frame</colorOpticalframeName>
      <depthOpticalframeName>camera_depth_optical_frame</depthOpticalframeName>
      <infrared1OpticalframeName>camera_left_ir_optical_frame</infrared1OpticalframeName>
      <infrared2OpticalframeName>camera_right_ir_optical_frame</infrared2OpticalframeName>
      <rangeMinDepth>0.2</rangeMinDepth>
      <rangeMaxDepth>10.0</rangeMaxDepth>
      <pointCloud>True</pointCloud>
      <pointCloudTopicName>depth/color/points</pointCloudTopicName>
      <pointCloudCutoff>0.25</pointCloudCutoff>
      <pointCloudCutoffMax>9.0</pointCloudCutoffMax>
    </plugin>
  </gazebo>
  <material name="invisible">
    <color rgba="0 0 0 0"/>
  </material>
  <material name="green">
    <color rgba="0 1 0 1"/>
  </material>
  <material name="grey">
    <color rgba="0.9 0.9 0.9 1"/>
  </material>
  <gazebo>
    <plugin filename="libgazebo_ros_skid_steer_drive.so" name="skid_steer_drive_controller">
      <updateRate>20.0</updateRate>
      <robotNamespace>/</robotNamespace>
      <leftFrontJoint>joint_front_left_wheel</leftFrontJoint>
      <rightFrontJoint>joint_front_right_wheel</rightFrontJoint>
      <leftRearJoint>joint_back_left_wheel</leftRearJoint>
      <rightRearJoint>joint_back_right_wheel</rightRearJoint>
      <wheelSeparation>0.2</wheelSeparation>
      <wheelDiameter>0.2</wheelDiameter>
      <robotBaseFrame>base_footprint</robotBaseFrame>
      <torque>10</torque>
      <maxVelocity>1</maxVelocity>
      <maxAcceleration>2.0</maxAcceleration>
      <topicName>cmd_vel</topicName>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <broadcastTF>true</broadcastTF>
      <covariance_x>0.0001</covariance_x>
      <covariance_y>0.0001</covariance_y>
      <covariance_yaw>0.01</covariance_yaw>
    </plugin>
  </gazebo>
  <!--#####################  LIDAR ##########################-->
  <gazebo reference="lidar_link">
    <sensor name="lidar_rays" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>False</visualize>
      <update_rate>5</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>719</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.05</min>
          <max>20.0</max>
          <resolution>0.01</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.005</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_laser.so" name="gazebo_ros_head_hokuyo_controller">
        <topicName>scan</topicName>
        <frameName>lidar_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <!--#####################  IMU SENSOR #################### -->
  <gazebo reference="imu_link">
    <sensor name="imu_sensor" type="imu">
      <always_on>true</always_on>
      <update_rate>25.0</update_rate>
      <visualize>true</visualize>
      <imu>
        <angular_velocity>
          <x>true</x>
          <y>true</y>
          <z>true</z>
        </angular_velocity>
        <linear_acceleration>
          <x>true</x>
          <y>true</y>
          <z>true</z>
        </linear_acceleration>
        <orientation>
          <x>true</x>
          <y>true</y>
          <z>true</z>
        </orientation>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.0001</stddev>
        </noise>
      </imu>
      <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
        <ros>
          <namespace>/</namespace>
        </ros>
        <updateRate>25.0</updateRate>
        <bodyName>imu_link</bodyName>
        <topicName>imu/data</topicName>
        <frameName>imu_link</frameName>
      </plugin>
    </sensor>
  </gazebo>
  <link name="base_footprint"/>
  <link name="robot_base">
    <visual>
      <origin rpy="1.57 0 3.14" xyz="0.15 -0.117 0"/>
      <geometry>
        <mesh filename="package://realsense_explorer_description/meshes/robot_chassis.STL" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin rpy="1.57 0 3.14" xyz="0.15 -0.117 0"/>
      <geometry>
        <mesh filename="package://realsense_explorer_description/meshes/robot_chassis.STL" scale="0.001 0.001 0.001"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="1.0"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0167" ixy="0.0" ixz="0.0" iyy="0.0208" iyz="0.0" izz="0.0108"/>
    </inertial>
  </link>
  <joint name="base_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint>
  <joint name="chasis_to_rbot" type="fixed">
    <parent link="base_link"/>
    <child link="robot_base"/>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </joint>
  <!-- Front Right Wheel -->
  <link name="link_front_right_wheel">
    <collision name="link_front_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <visual name="link_front_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="green"/>
    </visual>
    <inertial>
      <mass value="0.456"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="6.08e-5" ixy="0.0" ixz="0.0" iyy="6.08e-5" iyz="0.0" izz="9.12e-5"/>
    </inertial>
  </link>
  <joint name="joint_front_right_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="0.095 -0.08 0.02"/>
    <child link="link_front_right_wheel"/>
    <parent link="robot_base"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" velocity="10"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <!-- Front Left Wheel -->
  <link name="link_front_left_wheel">
    <collision name="link_front_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <visual name="link_front_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="green"/>
    </visual>
    <inertial>
      <mass value="0.456"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="6.08e-5" ixy="0.0" ixz="0.0" iyy="6.08e-5" iyz="0.0" izz="9.12e-5"/>
    </inertial>
  </link>
  <joint name="joint_front_left_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="0.095 0.08 0.02"/>
    <child link="link_front_left_wheel"/>
    <parent link="robot_base"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" velocity="10"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <!-- Back Left Wheel -->
  <link name="link_back_left_wheel">
    <collision name="link_back_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <visual name="link_back_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="green"/>
    </visual>
    <inertial>
      <mass value="0.456"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="6.08e-5" ixy="0.0" ixz="0.0" iyy="6.08e-5" iyz="0.0" izz="9.12e-5"/>
    </inertial>
  </link>
  <joint name="joint_back_left_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="-0.073 0.08 0.02"/>
    <child link="link_back_left_wheel"/>
    <parent link="robot_base"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" velocity="10"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <!-- Back Right Wheel -->
  <link name="link_back_right_wheel">
    <collision name="link_back_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
    <visual name="link_back_right_wheel_visual">
      <origin rpy="1.5707 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="green"/>
    </visual>
    <inertial>
      <mass value="0.456"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="6.08e-5" ixy="0.0" ixz="0.0" iyy="6.08e-5" iyz="0.0" izz="9.12e-5"/>
    </inertial>
  </link>
  <joint name="joint_back_right_wheel" type="continuous">
    <origin rpy="0 0 0" xyz="-0.073 -0.08 0.02"/>
    <child link="link_back_right_wheel"/>
    <parent link="robot_base"/>
    <axis xyz="0 1 0"/>
    <limit effort="100" velocity="10"/>
    <joint_properties damping="1.0" friction="1.0"/>
  </joint>
  <!-- IMU Link -->
  <link name="imu_link">
    <visual>
      <geometry>
        <box size="0.015 0.026 0.001"/>
      </geometry>
      <material name="green"/>
    </visual>
    <inertial>
      <mass value="0.000468"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.4e-7" ixy="0.0" ixz="0.0" iyy="4.3e-7" iyz="0.0" izz="6.1e-7"/>
    </inertial>
  </link>
  <joint name="imu_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0.114 0 0.05"/>
    <child link="imu_link"/>
    <parent link="robot_base"/>
  </joint>
  <!-- LIDAR Link -->
  <link name="lidar_link">
    <visual>
      <geometry>
        <cylinder length="0.03" radius="0.02"/>
        <!-- Adjust size as needed -->
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.03" radius="0.02"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="3.50e-5" ixy="0.0" ixz="0.0" iyy="3.50e-5" iyz="0.0" izz="4.00e-5"/>
    </inertial>
  </link>
  <link name="lidar_bottom_link">
    <visual>
      <geometry>
        <box size="0.05 0.052 0.03"/>
        <!-- Adjust size as needed -->
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.052 0.03"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="6.01e-5" ixy="0.0" ixz="0.0" iyy="5.67e-5" iyz="0.0" izz="8.67e-5"/>
    </inertial>
  </link>
  <link name="lidar_connection_link">
    <visual>
      <geometry>
        <box size="0.06 0.1 0.04"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.06 0.1 0.04"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.2"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="1.93e-4" ixy="0.0" ixz="0.0" iyy="8.67e-5" iyz="0.0" izz="2.27e-4"/>
    </inertial>
  </link>
  <!-- LIDAR Joint -->
  <joint name="lidar_joint" type="fixed">
    <parent link="robot_base"/>
    <child link="lidar_link"/>
    <origin rpy="0 0 0" xyz="0.03 0 0.205"/>
  </joint>
  <joint name="lidar_bottom_joint" type="fixed">
    <parent link="robot_base"/>
    <child link="lidar_bottom_link"/>
    <origin rpy="0 0 0" xyz="0.025 0 0.175"/>
  </joint>
  <joint name="lidar_connection_joint" type="fixed">
    <parent link="robot_base"/>
    <child link="lidar_connection_link"/>
    <origin rpy="0 0 0" xyz="0.02 0 0.144"/>
  </joint>
</robot>
